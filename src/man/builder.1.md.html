<!DOCTYPE html>
<html>
<head>
  <title>builder.1.md</title>
  <meta http-equiv="content-type" content="text/html; charset=UTF-8">
  <link rel="stylesheet" media="all" href="../../doc-style.css" />
  <script src="../../doc-filelist.js"></script>
  <script>
    var relativeDir = "../../", thisFile = "home/alex/a3/node-builder/src/man/builder1.md", defaultSidebar = true;
  </script>
  <script src="../../doc-script.js"></script>
  <script src="../../fileSearch.js"></script>
  <script src="../../goToLine.js"></script>
  <link rel="stylesheet" href="../../fileSearch.css" />
  <link rel="stylesheet" href="../../goToLine.css" />
</head>
<body>
  <nav>
<div class="logo"><a href="http://alinex.github.io" onmouseover="lllogo.src='http://alinex.github.io/images/Alinex-200.png'" onmouseout="lllogo.src='http://alinex.github.io/images/Alinex-black-200.png'">
  <img name="lllogo" src="http://alinex.github.io/images/Alinex-black-200.png" width="150" title="Alinex Universe Homepage" />
  </a>
  <img src="http://alinex.github.io/images/Alinex-200.png" style="display:none" alt="preloading" />
</div>
<div class="links">
  <a href="http://alinex.github.io/blog.html" class="btn btn-primary"><span class="glyphicon-cog"></span> Blog</a>
  <a href="http://alinex.github.io/code.html" class="btn btn-warning"><span class="glyphicon-pencil"></span> Code</a>
</div>
</nav><div id="sidebar_wrapper">
    <div id="sidebar_switch">
      <span class="tree">Files</span>
      <span class="headings">Headings</span>
    </div>
    <div id="tree"></div>
    <div id="headings">
      <div class="heading h1">
        <a href="#alinex%20development%20utils">Alinex Development Utils</a>
      </div>
      <div class="heading h2">
        <a href="#usage">Usage</a>
      </div>
      <div class="heading h2">
        <a href="#commands%20and%20options">Commands and options</a>
      </div>
      <div class="heading h3">
        <a href="#general%20options">General options</a>
      </div>
      <div class="heading h3">
        <a href="#command%20create">Command create</a>
      </div>
      <div class="heading h3">
        <a href="#command%20push">Command push</a>
      </div>
      <div class="heading h3">
        <a href="#command%20pull">Command pull</a>
      </div>
      <div class="heading h3">
        <a href="#command%20compile">Command compile</a>
      </div>
      <div class="heading h3">
        <a href="#command%20update">Command update</a>
      </div>
      <div class="heading h3">
        <a href="#command%20test">Command test</a>
      </div>
      <div class="heading h3">
        <a href="#command%3A%20doc">Command: doc</a>
      </div>
      <div class="heading h3">
        <a href="#command%20changes">Command changes</a>
      </div>
      <div class="heading h3">
        <a href="#command%20publish">Command publish</a>
      </div>
      <div class="heading h3">
        <a href="#command%3A%20clean">Command: clean</a>
      </div>
      <div class="heading h2">
        <a href="#configuration">Configuration</a>
      </div>
      <div class="heading h3">
        <a href="#document%20template">Document Template</a>
      </div>
      <div class="heading h2">
        <a href="#license">License</a>
      </div>
    </div>
  </div>
  <div id="sidebar-toggle"></div>
  <div id="container" tabindex="0"><a id="fork" href="https://github.com/alinex/node-builder" title="Fork me on GitHub"></a><div class="docs markdown">
<div class="pilwrap" id="alinex%20development%20utils">
  <h1>
    <a href="#alinex%20development%20utils" name="alinex%20development%20utils" class="pilcrow">&#182;</a>
    Alinex Development Utils
  </h1>
</div>


<p>The builder helps you to develop node modules.</p>


<div class="pilwrap" id="usage">
  <h2>
    <a href="#usage" name="usage" class="pilcrow">&#182;</a>
    Usage
  </h2>
</div>



<div class="highlight"><pre><code><span class="nx">builder</span> <span class="p">[</span><span class="o">-</span><span class="nx">vC</span><span class="p">]</span> <span class="o">-</span><span class="nx">c</span> <span class="nx">command</span><span class="p">...</span> <span class="p">[</span><span class="nx">dir</span><span class="p">]...</span>
</code></pre></div>



<p>You can give the following commands:</p>


<div class="highlight"><pre><code><span class="o">-</span> <span class="nx">list</span> <span class="o">-</span> <span class="nx">show</span> <span class="nx">the</span> <span class="nx">list</span> <span class="nx">of</span> <span class="nx">possible</span> <span class="nx">commands</span>
<span class="o">-</span> <span class="nx">create</span> <span class="o">-</span> <span class="nx">create</span> <span class="nx">a</span> <span class="k">new</span> <span class="kr">package</span>
<span class="o">-</span> <span class="nx">update</span> <span class="o">-</span> <span class="nx">update</span> <span class="nx">and</span> <span class="nx">installation</span> <span class="nx">of</span> <span class="kr">package</span> <span class="kd">with</span> <span class="nx">dependent</span> <span class="nx">packages</span>
<span class="o">-</span> <span class="nx">compile</span> <span class="o">-</span> <span class="nx">compile</span> <span class="nx">code</span>
<span class="o">-</span> <span class="nx">pull</span> <span class="o">-</span> <span class="nx">pull</span> <span class="nx">newest</span> <span class="nx">version</span> <span class="nx">from</span> <span class="nx">repository</span>
<span class="o">-</span> <span class="nx">push</span> <span class="o">-</span> <span class="nx">push</span> <span class="nx">changes</span> <span class="nx">to</span> <span class="nx">repository</span>
<span class="o">-</span> <span class="nx">publish</span> <span class="o">-</span> <span class="nx">publish</span> <span class="kr">package</span> <span class="k">in</span> <span class="nx">npm</span>
<span class="o">-</span> <span class="nx">doc</span> <span class="o">-</span> <span class="nx">create</span> <span class="nx">documentation</span> <span class="nx">pages</span>
<span class="o">-</span> <span class="nx">test</span> <span class="o">-</span> <span class="nx">run</span> <span class="nx">automatic</span> <span class="nx">tests</span>
<span class="o">-</span> <span class="nx">clean</span> <span class="o">-</span> <span class="nx">cleanup</span> <span class="nx">files</span>
<span class="o">-</span> <span class="nx">changes</span> <span class="o">-</span> <span class="nx">list</span> <span class="nx">unpublished</span> <span class="nx">changes</span>
</code></pre></div>



<p>And the available options are:</p>


<div class="highlight"><pre><code><span class="o">-</span><span class="nx">c</span><span class="p">,</span> <span class="o">--</span><span class="nx">command</span>   <span class="nx">command</span> <span class="nx">to</span> <span class="nx">execute</span> <span class="p">(</span><span class="nx">use</span> <span class="nx">list</span> <span class="nx">to</span> <span class="nx">see</span> <span class="nx">more</span><span class="p">)</span>           <span class="p">[</span><span class="nx">required</span><span class="p">]</span>
<span class="o">-</span><span class="nx">C</span><span class="p">,</span> <span class="o">--</span><span class="nx">nocolors</span>  <span class="nx">turn</span> <span class="nx">of</span> <span class="nx">color</span> <span class="nx">output</span>
<span class="o">-</span><span class="nx">v</span><span class="p">,</span> <span class="o">--</span><span class="nx">verbose</span>   <span class="nx">run</span> <span class="k">in</span> <span class="nx">verbose</span> <span class="nx">mode</span>
<span class="o">--</span><span class="kr">private</span>       <span class="nx">create</span><span class="o">:</span> <span class="kr">private</span> <span class="nx">repository</span>
<span class="o">--</span><span class="kr">package</span>       <span class="nx">create</span><span class="o">:</span> <span class="nx">set</span> <span class="kr">package</span> <span class="nx">name</span>
<span class="o">-</span><span class="nx">m</span><span class="p">,</span> <span class="o">--</span><span class="nx">message</span>   <span class="nx">push</span><span class="o">:</span> <span class="nx">text</span> <span class="k">for</span> <span class="nx">commit</span> <span class="nx">message</span>
<span class="o">-</span><span class="nx">u</span><span class="p">,</span> <span class="o">--</span><span class="nx">uglify</span>    <span class="nx">compile</span><span class="o">:</span> <span class="nx">run</span> <span class="nx">uglify</span> <span class="k">for</span> <span class="nx">each</span> <span class="nx">file</span>
<span class="o">--</span><span class="nx">minor</span>         <span class="nx">publish</span><span class="o">:</span> <span class="nx">change</span> <span class="nx">to</span> <span class="nx">next</span> <span class="nx">minor</span> <span class="nx">version</span>
<span class="o">--</span><span class="nx">major</span>         <span class="nx">publish</span><span class="o">:</span> <span class="nx">change</span> <span class="nx">to</span> <span class="nx">next</span> <span class="nx">major</span> <span class="nx">version</span>
<span class="o">--</span><span class="k">try</span>           <span class="nx">publish</span><span class="o">:</span> <span class="nx">don</span><span class="err">&#39;</span><span class="nx">t</span> <span class="nx">really</span> <span class="nx">publish</span> <span class="nx">but</span> <span class="nx">check</span> <span class="k">if</span> <span class="nx">it</span> <span class="nx">is</span> <span class="nx">possible</span>
<span class="o">--</span><span class="nx">force</span>         <span class="nx">publish</span><span class="o">:</span> <span class="nx">also</span> <span class="k">if</span> <span class="nx">tests</span> <span class="nx">have</span> <span class="nx">errors</span> <span class="nx">or</span> <span class="nx">submodules</span> <span class="nx">not</span>
                <span class="nx">up</span><span class="o">-</span><span class="nx">to</span><span class="o">-</span><span class="nx">date</span>
<span class="o">--</span><span class="nx">coverage</span>      <span class="nx">test</span><span class="o">:</span> <span class="nx">create</span> <span class="nx">coverage</span> <span class="nx">report</span>
<span class="o">--</span><span class="nx">coveralls</span>     <span class="nx">test</span><span class="o">:</span> <span class="nx">send</span> <span class="nx">coverage</span> <span class="nx">to</span> <span class="nx">coveralls</span>
<span class="o">--</span><span class="nx">watch</span>         <span class="nx">test</span><span class="p">,</span><span class="nx">doc</span><span class="o">:</span> <span class="nx">keep</span> <span class="nx">process</span> <span class="nx">running</span> <span class="k">while</span> <span class="nx">watching</span> <span class="k">for</span> <span class="nx">changes</span>
<span class="o">--</span><span class="nx">browser</span>       <span class="nx">test</span><span class="p">,</span><span class="nx">doc</span><span class="o">:</span> <span class="nx">open</span> <span class="k">in</span> <span class="nx">browser</span>
<span class="o">--</span><span class="nx">publish</span>       <span class="nx">doc</span><span class="o">:</span> <span class="nx">push</span> <span class="nx">to</span> <span class="nx">github</span> <span class="nx">pages</span>
<span class="o">--</span><span class="nx">dist</span>          <span class="nx">clean</span><span class="o">:</span> <span class="nx">all</span> <span class="nx">which</span> <span class="nx">is</span> <span class="nx">not</span> <span class="nx">needed</span> <span class="k">in</span> <span class="nx">production</span>
<span class="o">--</span><span class="nx">auto</span>          <span class="nx">clean</span><span class="o">:</span> <span class="nx">all</span> <span class="nx">which</span> <span class="nx">is</span> <span class="nx">created</span> <span class="nx">automatically</span>
<span class="o">-</span><span class="nx">h</span><span class="p">,</span> <span class="o">--</span><span class="nx">help</span>      <span class="nx">Show</span> <span class="nx">help</span>
</code></pre></div>




<div class="pilwrap" id="commands%20and%20options">
  <h2>
    <a href="#commands%20and%20options" name="commands%20and%20options" class="pilcrow">&#182;</a>
    Commands and options
  </h2>
</div>


<p>The tool will be called with</p>


<div class="highlight"><pre><code><span class="nx">builder</span> <span class="p">[</span><span class="nx">dirs</span><span class="p">]</span> <span class="p">[</span><span class="nx">general</span> <span class="nx">options</span><span class="p">]</span> <span class="o">-</span><span class="nx">c</span> <span class="o">&lt;</span><span class="nx">command</span><span class="o">&gt;</span> <span class="p">[</span><span class="nx">command</span> <span class="nx">options</span><span class="p">]</span>
</code></pre></div>



<p>With the option <code>--help</code> a screen explaining all commands and options will be
displayed. The major commands will be described here.</p>

<p>Multiple directory names can be given. They specify on which project to work on.
It should point to the base package directory of a module. If not specified the
command will run from the current directory.
You may change the order of the options like you want but keep the directories
before them. If you give a directory just behind a command it is interpreted
as additional command instead as directory.</p>

<p>If you want to give multiple commands add a second <code>-c</code> option or just put them
one behind the other in one option.</p>


<div class="pilwrap" id="general%20options">
  <h3>
    <a href="#general%20options" name="general%20options" class="pilcrow">&#182;</a>
    General options
  </h3>
</div>


<p><code>-v</code> or <code>--verbose</code> will display a lot of information of what is going on.
This information will sometimes look discarded because of the parallel
processing of some tasks.</p>

<p><code>-C</code> or <code>--no-colors</code> can be used to disable the colored output.</p>


<div class="pilwrap" id="command%20create">
  <h3>
    <a href="#command%20create" name="command%20create" class="pilcrow">&#182;</a>
    Command <code>create</code>
  </h3>
</div>


<p>Create a new package from scratch. This will create:</p>

<ul>
<li>the directory</li>
<li>make some initial files</li>
<li>init git repository</li>
<li>setup github repository</li>
<li>add and commit everything</li>
</ul>

<p>The create task needs the <code>--password</code> setting to access github
through the api. And you may specify the <code>--package</code> setting for the npm name
of the package. The also mandatory path will be used as the github repository
name, too.</p>

<p>Some example calls will look like:</p>


<div class="highlight"><pre><code><span class="o">&gt;</span> <span class="nx">builder</span> <span class="p">.</span><span class="o">/</span><span class="nx">node</span><span class="o">-</span><span class="nx">error</span> <span class="o">-</span><span class="nx">c</span> <span class="nx">create</span> <span class="o">--</span><span class="kr">package</span> <span class="nx">alinex</span><span class="o">-</span><span class="nx">error</span>
<span class="o">&gt;</span> <span class="nx">builder</span> <span class="p">.</span><span class="o">/</span><span class="kr">private</span><span class="o">-</span><span class="nx">module</span> <span class="o">-</span><span class="nx">c</span> <span class="nx">create</span> <span class="o">--</span><span class="kr">private</span>
</code></pre></div>



<p>This process is interactive and will ask you some more details. After that you
may directly start to add your code.</p>


<div class="pilwrap" id="command%20push">
  <h3>
    <a href="#command%20push" name="command%20push" class="pilcrow">&#182;</a>
    Command <code>push</code>
  </h3>
</div>


<p>This will push the changes to the origin repository. With the <code>--message</code> option
it will also add and commit all other changes before doing so.</p>


<div class="highlight"><pre><code><span class="o">&gt;</span> <span class="nx">builder</span> <span class="o">-</span><span class="nx">c</span> <span class="nx">push</span>                  <span class="err">#</span> <span class="nx">from</span> <span class="nx">within</span> <span class="nx">the</span> <span class="kr">package</span> <span class="nx">directory</span>
<span class="o">&gt;</span> <span class="nx">builder</span> <span class="p">.</span><span class="o">/</span><span class="nx">node</span><span class="o">-</span><span class="nx">error</span> <span class="o">-</span><span class="nx">c</span> <span class="nx">push</span>     <span class="err">#</span> <span class="nx">or</span> <span class="nx">from</span> <span class="nx">anywhere</span> <span class="k">else</span>
</code></pre></div>



<p>or to also commit the last changes</p>


<div class="highlight"><pre><code><span class="o">&gt;</span> <span class="nx">builder</span> <span class="o">-</span><span class="nx">c</span> <span class="nx">push</span> <span class="p">.</span><span class="o">/</span><span class="nx">node</span><span class="o">-</span><span class="nx">error</span> <span class="o">--</span><span class="nx">message</span> <span class="s2">&quot;commit message&quot;</span>
</code></pre></div>




<div class="pilwrap" id="command%20pull">
  <h3>
    <a href="#command%20pull" name="command%20pull" class="pilcrow">&#182;</a>
    Command <code>pull</code>
  </h3>
</div>


<p>Like <code>push</code> this will fetch the newest changes from git origin.</p>


<div class="highlight"><pre><code><span class="o">&gt;</span> <span class="nx">builder</span> <span class="o">-</span><span class="nx">c</span> <span class="nx">pull</span>                  <span class="err">#</span> <span class="nx">from</span> <span class="nx">within</span> <span class="nx">the</span> <span class="kr">package</span> <span class="nx">directory</span>
<span class="o">&gt;</span> <span class="nx">builder</span> <span class="p">.</span><span class="o">/</span><span class="nx">node</span><span class="o">-</span><span class="nx">error</span> <span class="o">-</span><span class="nx">c</span> <span class="nx">pull</span>     <span class="err">#</span> <span class="nx">or</span> <span class="nx">from</span> <span class="nx">anywhere</span> <span class="k">else</span>

<span class="nx">Pull</span> <span class="nx">from</span> <span class="nx">origin</span>
<span class="nx">Von</span> <span class="nx">https</span><span class="o">:</span><span class="c1">//github.com/alinex/node-make</span>
 <span class="o">*</span> <span class="nx">branch</span>            <span class="nx">master</span>     <span class="o">-&gt;</span> <span class="nx">FETCH_HEAD</span>
</code></pre></div>




<div class="pilwrap" id="command%20compile">
  <h3>
    <a href="#command%20compile" name="command%20compile" class="pilcrow">&#182;</a>
    Command <code>compile</code>
  </h3>
</div>


<p>This task is used to compile the sources into for runtime optimized library.</p>


<div class="highlight"><pre><code><span class="o">&gt;</span> <span class="nx">builder</span> <span class="o">-</span><span class="nx">c</span> <span class="nx">compile</span>               <span class="err">#</span> <span class="nx">from</span> <span class="nx">within</span> <span class="nx">the</span> <span class="kr">package</span> <span class="nx">directory</span>
<span class="o">&gt;</span> <span class="nx">builder</span> <span class="p">.</span><span class="o">/</span><span class="nx">node</span><span class="o">-</span><span class="nx">error</span> <span class="o">-</span><span class="nx">c</span> <span class="nx">compile</span>  <span class="err">#</span> <span class="nx">or</span> <span class="nx">from</span> <span class="nx">anywhere</span> <span class="k">else</span>

<span class="nx">Remove</span> <span class="nx">old</span> <span class="nx">directories</span>
<span class="nx">Compile</span> <span class="nx">man</span> <span class="nx">pages</span>
<span class="nx">Compile</span> <span class="nx">coffee</span> <span class="nx">script</span>
</code></pre></div>



<p>Or give an directory and use uglify to compress the <strong>just now experimental</strong>
extension. It works for live server but will break source maps for node-error
and makes your coverage report unreadable.</p>


<div class="highlight"><pre><code><span class="o">&gt;</span> <span class="nx">builder</span> <span class="p">.</span><span class="o">/</span><span class="nx">node</span><span class="o">-</span><span class="nx">error</span> <span class="o">-</span><span class="nx">c</span> <span class="nx">compile</span>  <span class="o">--</span><span class="nx">uglify</span>
</code></pre></div>



<p>Mostly this task will be added as prepublish script to the <code>package.json</code> like:</p>


<div class="highlight"><pre><code><span class="s2">&quot;scripts&quot;</span><span class="o">:</span> <span class="p">{</span>
  <span class="s2">&quot;prepublish&quot;</span><span class="o">:</span> <span class="s2">&quot;node_modules/.bin/builder -c compile -u&quot;</span>
<span class="p">}</span>
</code></pre></div>



<p>Also this will make man files from mardown documents in <code>src/man</code> if they
are referenced in the package.json.</p>


<div class="pilwrap" id="command%20update">
  <h3>
    <a href="#command%20update" name="command%20update" class="pilcrow">&#182;</a>
    Command <code>update</code>
  </h3>
</div>


<p>This task is a handy addition to include the npm install and npm update commands:</p>


<div class="highlight"><pre><code><span class="o">&gt;</span> <span class="nx">builder</span> <span class="o">-</span><span class="nx">c</span> <span class="nx">update</span>               <span class="err">#</span> <span class="nx">from</span> <span class="nx">within</span> <span class="nx">the</span> <span class="kr">package</span> <span class="nx">directory</span>
<span class="o">&gt;</span> <span class="nx">builder</span> <span class="p">.</span><span class="o">/</span><span class="nx">node</span><span class="o">-</span><span class="nx">error</span> <span class="o">-</span><span class="nx">c</span> <span class="nx">update</span>  <span class="err">#</span> <span class="nx">or</span> <span class="nx">from</span> <span class="nx">anywhere</span> <span class="k">else</span>
</code></pre></div>



<p>At the end this task will list all direct subpackages which are outdated and may
be updated in the package.json.</p>


<div class="highlight"><pre><code><span class="nx">update</span> <span class="nx">and</span> <span class="nx">installation</span> <span class="nx">of</span> <span class="kr">package</span> <span class="kd">with</span> <span class="nx">dependent</span> <span class="nx">packages</span>
<span class="nx">update</span> <span class="p">.</span><span class="o">/</span>
<span class="nx">Install</span> <span class="nx">through</span> <span class="nx">npm</span>
<span class="nx">Update</span> <span class="nx">npm</span> <span class="nx">packages</span>
<span class="nx">List</span> <span class="nx">outdated</span> <span class="nx">packages</span>
<span class="nx">Package</span>               <span class="nx">Current</span>  <span class="nx">Wanted</span>     <span class="nx">Latest</span>  <span class="nx">Location</span>
<span class="nx">Nothing</span> <span class="nx">to</span> <span class="nx">upgrade</span> <span class="k">in</span> <span class="k">this</span> <span class="kr">package</span> <span class="nx">found</span><span class="p">.</span>
<span class="nx">Done</span><span class="p">.</span>
</code></pre></div>




<div class="pilwrap" id="command%20test">
  <h3>
    <a href="#command%20test" name="command%20test" class="pilcrow">&#182;</a>
    Command <code>test</code>
  </h3>
</div>


<p>As a first test a coffeelint check will be run. Only if this won't have any
errors the automatic tests will be run.</p>

<p>If the <a href="http://gotwarlost.github.io/istanbul/">istanbul</a> module is installed
a code coverage report will be build.</p>


<div class="highlight"><pre><code><span class="o">&gt;</span> <span class="nx">builder</span> <span class="o">-</span><span class="nx">c</span> <span class="nx">test</span>                  <span class="err">#</span> <span class="nx">from</span> <span class="nx">within</span> <span class="nx">the</span> <span class="kr">package</span> <span class="nx">directory</span>
<span class="o">&gt;</span> <span class="nx">builder</span> <span class="p">.</span><span class="o">/</span><span class="nx">node</span><span class="o">-</span><span class="nx">error</span> <span class="o">-</span><span class="nx">c</span> <span class="nx">test</span>     <span class="err">#</span> <span class="nx">or</span> <span class="nx">from</span> <span class="nx">anywhere</span> <span class="k">else</span>

<span class="nx">Linting</span> <span class="nx">coffee</span> <span class="nx">code</span>
<span class="nx">Run</span> <span class="nx">mocha</span> <span class="nx">tests</span>

  <span class="nx">Simple</span> <span class="nx">mocha</span> <span class="nx">test</span>
    <span class="err">✓</span> <span class="nx">should</span> <span class="nx">add</span> <span class="nx">two</span> <span class="nx">numbers</span>

  <span class="mi">1</span> <span class="nx">passing</span> <span class="p">(</span><span class="mi">9</span><span class="nx">ms</span><span class="p">)</span>
</code></pre></div>



<p>Or to contineously watch it:</p>


<div class="highlight"><pre><code><span class="o">&gt;</span> <span class="nx">builder</span> <span class="p">.</span><span class="o">/</span><span class="nx">node</span><span class="o">-</span><span class="nx">error</span> <span class="o">-</span><span class="nx">c</span> <span class="nx">test</span> <span class="o">--</span><span class="nx">watch</span>
</code></pre></div>



<p>You may also create an html coverage report:</p>


<div class="highlight"><pre><code><span class="o">&gt;</span> <span class="nx">builder</span> <span class="o">-</span><span class="nx">c</span> <span class="nx">test</span> <span class="o">--</span><span class="nx">coverage</span>
</code></pre></div>



<p>And at last you can add the <code>--browser</code> flag to open the coverage report
automatically in the browser. Also <code>--coveralls</code> may be added to send the
results to coveralls.</p>

<p>This task can also be added to the <code>package.json</code> to be called using <code>npm test</code>:</p>


<div class="highlight"><pre><code><span class="s2">&quot;scripts&quot;</span><span class="o">:</span> <span class="p">{</span>
  <span class="s2">&quot;test&quot;</span><span class="o">:</span> <span class="s2">&quot;node_modules/.bin/builder test&quot;</span>
<span class="p">}</span>
</code></pre></div>




<div class="pilwrap" id="command%3A%20doc">
  <h3>
    <a href="#command%3A%20doc" name="command%3A%20doc" class="pilcrow">&#182;</a>
    Command: <code>doc</code>
  </h3>
</div>


<p>Generate the documentation this will create the documentation in the <code>doc</code>
folder. It includes the API documentation with code. Each module will get his
own documentation space with an auto generated index page.</p>

<p>This tool will extract the documentation from the markup and code files in
any language and generate HTML pages with the documentation beside the
code.</p>


<div class="highlight"><pre><code><span class="o">&gt;</span> <span class="nx">builder</span> <span class="o">-</span><span class="nx">c</span> <span class="nx">doc</span>                   <span class="err">#</span> <span class="nx">from</span> <span class="nx">within</span> <span class="nx">the</span> <span class="kr">package</span> <span class="nx">directory</span>
<span class="o">&gt;</span> <span class="nx">builder</span> <span class="p">.</span><span class="o">/</span><span class="nx">node</span><span class="o">-</span><span class="nx">error</span> <span class="o">-</span><span class="nx">c</span> <span class="nx">doc</span>      <span class="err">#</span> <span class="nx">or</span> <span class="nx">from</span> <span class="nx">anywhere</span> <span class="k">else</span>

<span class="nx">Create</span> <span class="nx">html</span> <span class="nx">documentation</span>
<span class="nx">Done</span><span class="p">.</span>
</code></pre></div>



<p>It is also possible to update the documentation stored on any website. To
configure this for GitHub pages, you have to do nothing, for all others you
need to specify an <code>doc-publish</code> script in <code>package.json</code>. This may be an
rsync copy job like <code>rsync -av --delete doc root@myserver:/var/www</code>.
Start the document creation with publication using:</p>


<div class="highlight"><pre><code><span class="o">&gt;</span> <span class="nx">builder</span> <span class="p">.</span><span class="o">/</span><span class="nx">node</span><span class="o">-</span><span class="nx">error</span> <span class="o">-</span><span class="nx">c</span> <span class="nx">doc</span> <span class="o">--</span><span class="nx">publish</span>
</code></pre></div>



<p>With the <code>--watch</code> option it is possible to keep the documentation updated.</p>


<div class="highlight"><pre><code><span class="o">&gt;</span> <span class="nx">builder</span> <span class="p">.</span><span class="o">/</span><span class="nx">node</span><span class="o">-</span><span class="nx">error</span> <span class="o">-</span><span class="nx">c</span> <span class="nx">doc</span>  <span class="o">--</span><span class="nx">watch</span>
</code></pre></div>



<p>But this process will never end, you have to stop it manually to end it.</p>

<p>And at last you may also add the <code>--browser</code> flag to open the documentation in
the browser after created.</p>

<p>The style of the documentation can be specified if a specific css is present
in the alinex make package. It have to be under the path <code>src/data</code> and be called
by the <code>&lt;basename&gt;.css</code> while basename is the package name before the first
hyphen.</p>


<div class="pilwrap" id="command%20changes">
  <h3>
    <a href="#command%20changes" name="command%20changes" class="pilcrow">&#182;</a>
    Command <code>changes</code>
  </h3>
</div>


<p>This will list all changes (checkins) which are done since the last publication.
Use this to check if you should make a new publication or if it can wait.</p>


<div class="highlight"><pre><code><span class="o">&gt;</span> <span class="nx">builder</span> <span class="o">-</span><span class="nx">c</span> <span class="nx">changes</span>

<span class="nx">Changes</span> <span class="nx">since</span> <span class="nx">last</span> <span class="nx">publication</span><span class="o">:</span>
<span class="o">-</span> <span class="nx">Small</span> <span class="nx">bugfix</span> <span class="k">in</span> <span class="nx">creating</span> <span class="nx">docs</span> <span class="k">for</span> <span class="nx">non</span> <span class="nx">alinex</span> <span class="nx">packages</span><span class="p">.</span>
<span class="o">-</span> <span class="nx">Fixed</span> <span class="nx">internal</span> <span class="nx">links</span> <span class="k">in</span> <span class="nx">documentation</span><span class="p">.</span>
<span class="o">-</span> <span class="nx">Changed</span> <span class="nx">created</span> <span class="nx">script</span> <span class="nx">calls</span> <span class="nx">to</span> <span class="nx">support</span> <span class="nx">newer</span> <span class="nx">make</span><span class="p">.</span>
<span class="o">-</span> <span class="nx">Updated</span> <span class="nx">to</span> <span class="nx">use</span> <span class="nx">newest</span> <span class="nx">make</span> <span class="nx">version</span> <span class="k">in</span> <span class="nx">created</span> <span class="nx">files</span><span class="p">.</span>
<span class="o">-</span> <span class="nx">Fixed</span> <span class="nx">create</span> <span class="nx">task</span> <span class="nx">which</span> <span class="nx">was</span> <span class="nx">completely</span> <span class="nx">buggy</span> <span class="nx">since</span> <span class="nx">last</span> <span class="nx">rewrite</span><span class="p">.</span>
</code></pre></div>




<div class="pilwrap" id="command%20publish">
  <h3>
    <a href="#command%20publish" name="command%20publish" class="pilcrow">&#182;</a>
    Command <code>publish</code>
  </h3>
</div>


<p>With the push command you can publish your newest changes to github and npm as a
new version. The version can be set by signaling if it should be a <code>--major</code>,
<code>--minor</code> or bugfix version if no switch given.</p>

<p>To publish the next bugfix version only call:</p>


<div class="highlight"><pre><code><span class="o">&gt;</span> <span class="nx">builder</span> <span class="o">-</span><span class="nx">c</span> <span class="nx">publish</span>               <span class="err">#</span> <span class="nx">from</span> <span class="nx">within</span> <span class="nx">the</span> <span class="kr">package</span> <span class="nx">directory</span>
<span class="o">&gt;</span> <span class="nx">builder</span> <span class="p">.</span><span class="o">/</span><span class="nx">node</span><span class="o">-</span><span class="nx">error</span> <span class="o">-</span><span class="nx">c</span> <span class="nx">publish</span>  <span class="err">#</span> <span class="nx">or</span> <span class="nx">from</span> <span class="nx">anywhere</span> <span class="k">else</span>

<span class="nx">Change</span> <span class="kr">package</span><span class="p">.</span><span class="nx">json</span>
<span class="nx">Write</span> <span class="k">new</span> <span class="nx">changelog</span>
<span class="nx">Commit</span> <span class="k">new</span> <span class="nx">version</span> <span class="nx">information</span>
<span class="nx">Push</span> <span class="nx">to</span> <span class="nx">git</span> <span class="nx">origin</span>
<span class="nx">To</span> <span class="nx">https</span><span class="o">:</span><span class="c1">//github.com/alinex/node-make</span>
   <span class="nx">a06c5ec</span><span class="p">..</span><span class="nx">c93df17</span>  <span class="nx">master</span> <span class="o">-&gt;</span> <span class="nx">master</span>
<span class="nx">Push</span> <span class="k">new</span> <span class="nx">tag</span> <span class="nx">to</span> <span class="nx">git</span> <span class="nx">origin</span>
<span class="nx">To</span> <span class="nx">https</span><span class="o">:</span><span class="c1">//github.com/alinex/node-make</span>
 <span class="o">*</span> <span class="p">[</span><span class="k">new</span> <span class="nx">tag</span><span class="p">]</span>         <span class="nx">v0</span><span class="p">.</span><span class="mf">4.6</span> <span class="o">-&gt;</span> <span class="nx">v0</span><span class="p">.</span><span class="mf">4.6</span>
<span class="nx">Push</span> <span class="nx">to</span> <span class="nx">npm</span>
<span class="nx">Created</span> <span class="nx">v0</span><span class="p">.</span><span class="mf">4.6</span><span class="p">.</span>
</code></pre></div>



<p>For the next minor version (second number) call:</p>


<div class="highlight"><pre><code><span class="o">&gt;</span> <span class="nx">builder</span> <span class="p">.</span><span class="o">/</span><span class="nx">node</span><span class="o">-</span><span class="nx">error</span> <span class="o">-</span><span class="nx">c</span> <span class="nx">publish</span> <span class="o">--</span><span class="nx">minor</span>
</code></pre></div>



<p>And for a new major version:</p>


<div class="highlight"><pre><code><span class="o">&gt;</span> <span class="nx">builder</span> <span class="p">.</span><span class="o">/</span><span class="nx">node</span><span class="o">-</span><span class="nx">error</span> <span class="o">-</span><span class="nx">c</span> <span class="nx">publish</span> <span class="o">--</span><span class="nx">major</span>
</code></pre></div>



<p>And you may use the switches <code>--try</code> to not really publish but to check if it will
be possible and <code>--force</code> to always publish also if it is not possible because of
failed tests or not up-to-date dependent packages.</p>


<div class="pilwrap" id="command%3A%20clean">
  <h3>
    <a href="#command%3A%20clean" name="command%3A%20clean" class="pilcrow">&#182;</a>
    Command: <code>clean</code>
  </h3>
</div>


<p>Remove all automatically generated files. This will bring you to the initial
state of the system. To create a usable system you have to build it again.</p>

<p>To clean everything which you won't need for a production environment use
<code>--dist</code> or <code>--auto</code> to remove all automatically generated files in the
development environment.</p>

<p>To cleanup all safe files:</p>


<div class="highlight"><pre><code><span class="o">&gt;</span> <span class="nx">builder</span> <span class="o">-</span><span class="nx">c</span> <span class="nx">clean</span>                 <span class="err">#</span> <span class="nx">from</span> <span class="nx">within</span> <span class="nx">the</span> <span class="kr">package</span> <span class="nx">directory</span>
<span class="o">&gt;</span> <span class="nx">builder</span> <span class="p">.</span><span class="o">/</span><span class="nx">node</span><span class="o">-</span><span class="nx">error</span> <span class="o">-</span><span class="nx">c</span> <span class="nx">clean</span>    <span class="err">#</span> <span class="nx">or</span> <span class="nx">from</span> <span class="nx">anywhere</span> <span class="k">else</span>
</code></pre></div>



<p>Or on the development system remove all created files:</p>


<div class="highlight"><pre><code><span class="o">&gt;</span> <span class="nx">builder</span> <span class="p">.</span><span class="o">/</span><span class="nx">node</span><span class="o">-</span><span class="nx">error</span> <span class="o">-</span><span class="nx">c</span> <span class="nx">clean</span> <span class="o">--</span><span class="nx">auto</span>
</code></pre></div>



<p>And at last for production remove development files:</p>


<div class="highlight"><pre><code><span class="o">&gt;</span> <span class="nx">builder</span> <span class="p">.</span><span class="o">/</span><span class="nx">node</span><span class="o">-</span><span class="nx">error</span> <span class="o">-</span><span class="nx">c</span> <span class="nx">clean</span> <span class="o">--</span><span class="nx">dist</span>
</code></pre></div>




<div class="pilwrap" id="configuration">
  <h2>
    <a href="#configuration" name="configuration" class="pilcrow">&#182;</a>
    Configuration
  </h2>
</div>



<div class="pilwrap" id="document%20template">
  <h3>
    <a href="#document%20template" name="document%20template" class="pilcrow">&#182;</a>
    Document Template
  </h3>
</div>


<p>You may specify a different document layout by creating a file named like the
main part of your package (name till the first hyphen). Use the file
<code>/var/src/docstyle/default.css</code> as a default and store your own in
<code>/var/local/docstyle/&lt;basename&gt;.css</code>.</p>

<p>Also the javascript may be changed for each package basename in <code>&lt;basename&gt;.js</code>
like done for the css.</p>


<div class="pilwrap" id="license">
  <h2>
    <a href="#license" name="license" class="pilcrow">&#182;</a>
    License
  </h2>
</div>


<p>Copyright 2013-2014 Alexander Schilling</p>

<p>Licensed under the Apache License, Version 2.0 (the "License");
you may not use this file except in compliance with the License.
You may obtain a copy of the License at</p>

<blockquote>
  <p><a href="http://www.apache.org/licenses/LICENSE-2.0">http://www.apache.org/licenses/LICENSE-2.0</a></p>
</blockquote>

<p>Unless required by applicable law or agreed to in writing, software
distributed under the License is distributed on an "AS IS" BASIS,
WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
See the License for the specific language governing permissions and
limitations under the License.</p></div>
  </div>
</body>
</html>
