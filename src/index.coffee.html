<!DOCTYPE html>
<html>
<head>
  <title>index.coffee</title>
  <meta http-equiv="content-type" content="text/html; charset=UTF-8">
  <link rel="stylesheet" media="all" href="../doc-style.css" />
  <script src="../doc-filelist.js"></script>
  <script>
    var relativeDir = "../", thisFile = "home/alex/a3/node-make/src/index.coffee", defaultSidebar = true;
  </script>
  <script src="../doc-script.js"></script>
  <script src="../fileSearch.js"></script>
  <script src="../goToLine.js"></script>
  <link rel="stylesheet" href="../fileSearch.css" />
  <link rel="stylesheet" href="../goToLine.css" />
</head>
<body>
  <div id="sidebar_wrapper">
    <div id="sidebar_switch">
      <span class="tree">Files</span>
      <span class="headings">Headings</span>
    </div>
    <div id="tree"></div>
    <div id="headings">
      <div class="heading h1">
        <a href="#startup%20script">Startup script</a>
      </div>
      <div class="heading h3">
        <a href="#main%20routine">Main routine</a>
      </div>
      <div class="heading h3">
        <a href="#task%20libraries">Task libraries</a>
      </div>
      <div class="heading h2">
        <a href="#node%20modules">Node Modules</a>
      </div>
      <div class="heading h2">
        <a href="#setup%20build%20environment">Setup build environment</a>
      </div>
      <div class="heading h2">
        <a href="#run%20task%20library">Run task library</a>
      </div>
      <div class="heading h2">
        <a href="#command%20setup">Command setup</a>
      </div>
      <div class="heading h3">
        <a href="#create%20new%20module">Create new module</a>
      </div>
      <div class="heading h3">
        <a href="#push%20to%20github">Push to GitHub</a>
      </div>
      <div class="heading h3">
        <a href="#push%20to%20github">Push to GitHub</a>
      </div>
      <div class="heading h3">
        <a href="#compile%20the%20code%20as%20necessary">Compile the code as necessary</a>
      </div>
      <div class="heading h3">
        <a href="#publish%20to%20github%20and%20npm">Publish to GitHub and npm</a>
      </div>
      <div class="heading h3">
        <a href="#build%20running%20system">Build running system</a>
      </div>
      <div class="heading h3">
        <a href="#create%20documentation">Create documentation</a>
      </div>
      <div class="heading h3">
        <a href="#cleanup%20automatic%20created%20files">Cleanup automatic created files</a>
      </div>
      <div class="heading h2">
        <a href="#run%20commands">Run commands</a>
      </div>
    </div>
  </div>
  <div id="sidebar-toggle"></div>
  <div id="container"><a id="fork" href="https://github.com/alinex/node-make" title="Fork me on GitHub"></a><div class="background highlight"></div>
<table cellpadding="0" cellspacing="0">
  <tbody>
      <tr>
        <td class="docs">
<div class="pilwrap" id="startup%20script">
  <h1>
    <a href="#startup%20script" name="startup%20script" class="pilcrow">&#182;</a>
    Startup script
  </h1>
</div>


<p>This file is used to manage the whole build environment.</p>


<div class="pilwrap" id="main%20routine">
  <h3>
    <a href="#main%20routine" name="main%20routine" class="pilcrow">&#182;</a>
    Main routine
  </h3>
</div>


<p>This file defines the command line interface with the defined commands. They
will be run in parallel as possible.</p>

<p>It will work with an boolean <code>success</code> value which is handed through the
functions to define if everything went correct or something was not possible.
If an real and unexpected error occur it will be thrown. All errors which
aren't caught will end in an error and abort with exit code 2.</p>


<div class="pilwrap" id="task%20libraries">
  <h3>
    <a href="#task%20libraries" name="task%20libraries" class="pilcrow">&#182;</a>
    Task libraries
  </h3>
</div>


<p>Each task is made available as separate task module with the <code>run</code> method
to be called for each alinex package. The given command on the command line
call may trigger multiple tasks which are done.</p>

<p>Each task will get a <code>command</code> object which holds all the information from the
command line call.</p>
        </td>
        <td class="code highlight"><div class="highlight"><pre></pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap" id="node%20modules">
  <h2>
    <a href="#node%20modules" name="node%20modules" class="pilcrow">&#182;</a>
    Node Modules
  </h2>
</div>

        </td>
        <td class="code highlight"><div class="highlight"><pre>

<span class="nv">errorHandler = </span><span class="nx">require</span> <span class="s">&#39;alinex-error&#39;</span>
<span class="nx">errorHandler</span><span class="p">.</span><span class="nx">install</span><span class="p">()</span>
<span class="nv">errorHandler.config.stack.modules = </span><span class="kc">true</span>


</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-3" id="section-3">&#182;</a>
</div>
<p>include base modules</p>
        </td>
        <td class="code highlight"><div class="highlight"><pre>
<span class="nv">commander = </span><span class="nx">require</span> <span class="s">&#39;commander&#39;</span>
<span class="nv">fs = </span><span class="nx">require</span> <span class="s">&#39;fs&#39;</span>
<span class="nv">path = </span><span class="nx">require</span> <span class="s">&#39;path&#39;</span>
<span class="nv">colors = </span><span class="nx">require</span> <span class="s">&#39;colors&#39;</span>
<span class="nv">async = </span><span class="nx">require</span> <span class="s">&#39;async&#39;</span>



</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap" id="setup%20build%20environment">
  <h2>
    <a href="#setup%20build%20environment" name="setup%20build%20environment" class="pilcrow">&#182;</a>
    Setup build environment
  </h2>
</div>

        </td>
        <td class="code highlight"><div class="highlight"><pre>


</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-5" id="section-5">&#182;</a>
</div>
<p>Root directory of the core application</p>
        </td>
        <td class="code highlight"><div class="highlight"><pre>
<span class="nv">GLOBAL.ROOT_DIR = </span><span class="nx">path</span><span class="p">.</span><span class="nx">dirname</span> <span class="nx">__dirname</span>

</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-6" id="section-6">&#182;</a>
</div>
<p>Read in package configuration</p>
        </td>
        <td class="code highlight"><div class="highlight"><pre>
<span class="nv">GLOBAL.PKG = </span><span class="nx">JSON</span><span class="p">.</span><span class="nx">parse</span> <span class="nx">fs</span><span class="p">.</span><span class="nx">readFileSync</span> <span class="nx">path</span><span class="p">.</span><span class="nx">join</span> <span class="nx">ROOT_DIR</span><span class="p">,</span> <span class="s">&#39;package.json&#39;</span>


</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-7" id="section-7">&#182;</a>
</div>
<p>set the process title</p>
        </td>
        <td class="code highlight"><div class="highlight"><pre>
<span class="nv">process.title = </span><span class="s">&#39;alinex-make&#39;</span>



</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap" id="run%20task%20library">
  <h2>
    <a href="#run%20task%20library" name="run%20task%20library" class="pilcrow">&#182;</a>
    Run task library
  </h2>
</div>


<p>Load the defined task library and run it for all alinex packages.</p>

<p><strong>Arguments:</strong></p>

<ul>
<li><code>commander</code>
Commander instance for reading options.</li>
<li><code>command</code>
Command specific parameters and options.</li>
<li><code>callback(err)</code>
The callback will be called just if an error occurred or with <code>null</code> if
execution finished.</li>
</ul>
        </td>
        <td class="code highlight"><div class="highlight"><pre>
<span class="nv">run = </span><span class="nf">(commander, command, cb) -&gt;</span>
  <span class="nv">colors.mode = </span><span class="s">&#39;none&#39;</span> <span class="k">unless</span> <span class="nx">commander</span><span class="p">.</span><span class="nx">colors</span>
  <span class="nv">command.colors = </span><span class="nx">commander</span><span class="p">.</span><span class="nx">colors</span>
  <span class="nv">command.verbose = </span><span class="nx">commander</span><span class="p">.</span><span class="nx">verbose</span>
  <span class="nx">console</span><span class="p">.</span><span class="nx">log</span> <span class="nx">command</span><span class="p">.</span><span class="nx">_description</span><span class="p">.</span><span class="nx">blue</span><span class="p">.</span><span class="nx">bold</span>

</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-9" id="section-9">&#182;</a>
</div>
<p>load task library</p>
        </td>
        <td class="code highlight"><div class="highlight"><pre>
  <span class="nv">lib = </span><span class="nx">require</span> <span class="s">&#39;./&#39;</span> <span class="o">+</span> <span class="nx">command</span><span class="p">.</span><span class="nx">_name</span> <span class="o">+</span> <span class="s">&#39;Task&#39;</span>

</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-10" id="section-10">&#182;</a>
</div>
<p>run modules in parallel</p>
        </td>
        <td class="code highlight"><div class="highlight"><pre>
  <span class="nx">lib</span><span class="p">.</span><span class="nx">run</span> <span class="nx">command</span><span class="p">,</span> <span class="nf">(err) -&gt;</span>
    <span class="nx">errorHandler</span><span class="p">.</span><span class="nx">report</span> <span class="nx">err</span> <span class="k">if</span> <span class="nx">err</span>
    <span class="nx">console</span><span class="p">.</span><span class="nx">log</span> <span class="s">&quot;Done.&quot;</span><span class="p">.</span><span class="nx">green</span>
    <span class="nx">cb</span><span class="p">()</span>



</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap" id="command%20setup">
  <h2>
    <a href="#command%20setup" name="command%20setup" class="pilcrow">&#182;</a>
    Command setup
  </h2>
</div>


<p>Setup the command line interface with options.</p>

<p>The call syntax looks like:</p>


<div class="highlight"><pre><code><span class="nx">bin</span><span class="o">/</span><span class="nx">make</span><span class="p">.</span><span class="nx">sh</span> <span class="p">[</span><span class="nx">general</span> <span class="nx">options</span><span class="p">]</span> <span class="o">&lt;</span><span class="nx">command</span><span class="o">&gt;</span> <span class="p">[</span><span class="nx">command</span> <span class="nx">options</span><span class="p">]</span><span class="err">Â </span><span class="p">[</span><span class="nx">additional</span> <span class="nx">arguments</span><span class="p">]</span>
</code></pre></div>



<p>process.argv[1] = 'bin/make.sh' if path.basename process.argv[1] is 'index.coffee'</p>
        </td>
        <td class="code highlight"><div class="highlight"><pre>
<span class="nx">commander</span>
<span class="p">.</span><span class="nx">version</span><span class="p">(</span><span class="nx">PKG</span><span class="p">.</span><span class="nx">name</span> <span class="o">+</span> <span class="s">&#39; V &#39;</span> <span class="o">+</span> <span class="nx">PKG</span><span class="p">.</span><span class="nx">version</span> <span class="o">+</span> <span class="s">&#39; by &#39;</span> <span class="o">+</span> <span class="nx">PKG</span><span class="p">.</span><span class="nx">copyright</span><span class="p">)</span>
<span class="p">.</span><span class="nx">option</span><span class="p">(</span><span class="s">&#39;-v, --verbose&#39;</span><span class="p">,</span> <span class="s">&#39;Run in verbose mode&#39;</span><span class="p">)</span>
<span class="p">.</span><span class="nx">option</span><span class="p">(</span><span class="s">&#39;-C, --no-colors&#39;</span><span class="p">,</span> <span class="s">&#39;Turn colors off&#39;</span><span class="p">)</span>
<span class="p">.</span><span class="nx">on</span> <span class="s">&#39;--help&#39;</span><span class="p">,</span> <span class="nf">-&gt;</span>
  <span class="nx">console</span><span class="p">.</span><span class="nx">log</span> <span class="s">&quot;&quot;&quot;</span>
<span class="s">    ---------------------------------------------------------------------</span>

<span class="s">      Command help:</span>

<span class="s">        $ </span><span class="si">#{</span><span class="nx">process</span><span class="p">.</span><span class="nx">argv</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span><span class="si">}</span><span class="s"> [command] --help</span>

<span class="s">      This will show command specific help including special options</span>
<span class="s">      and arguments which may be given after the command.</span>

<span class="s">    &quot;&quot;&quot;</span>


</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap" id="create%20new%20module">
  <h3>
    <a href="#create%20new%20module" name="create%20new%20module" class="pilcrow">&#182;</a>
    Create new module
  </h3>
</div>

        </td>
        <td class="code highlight"><div class="highlight"><pre>
<span class="nx">commander</span><span class="p">.</span><span class="nx">command</span><span class="p">(</span><span class="s">&#39;create &lt;dir&gt;&#39;</span><span class="p">)</span>
<span class="p">.</span><span class="nx">description</span><span class="p">(</span><span class="s">&#39;Create new node module&#39;</span><span class="p">)</span>
<span class="p">.</span><span class="nx">option</span><span class="p">(</span><span class="s">&#39;-p, --package &lt;name&gt;&#39;</span><span class="p">,</span> <span class="s">&#39;Create the given module&#39;</span><span class="p">)</span>
<span class="p">.</span><span class="nx">option</span><span class="p">(</span><span class="s">&#39;-p, --private&#39;</span><span class="p">,</span> <span class="s">&#39;Create a private repository&#39;</span><span class="p">)</span>
<span class="p">.</span><span class="nx">action</span> <span class="nf">(dir, options) -&gt;</span>
  <span class="nv">options.dir = </span><span class="nx">dir</span>
  <span class="nx">options</span><span class="p">.</span><span class="nx">package</span> <span class="o">?=</span> <span class="nx">path</span><span class="p">.</span><span class="nx">basename</span> <span class="nx">dir</span>
  <span class="nv">options.user = </span><span class="s">&#39;alinex&#39;</span>
  <span class="nx">run</span> <span class="nx">commander</span><span class="p">,</span> <span class="nx">options</span><span class="p">,</span> <span class="nf">-&gt;</span> <span class="nx">process</span><span class="p">.</span><span class="nx">exit</span> <span class="mi">0</span>


</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap" id="push%20to%20github">
  <h3>
    <a href="#push%20to%20github" name="push%20to%20github" class="pilcrow">&#182;</a>
    Push to GitHub
  </h3>
</div>

        </td>
        <td class="code highlight"><div class="highlight"><pre>
<span class="nx">commander</span><span class="p">.</span><span class="nx">command</span><span class="p">(</span><span class="s">&#39;push [dir]&#39;</span><span class="p">)</span>
<span class="p">.</span><span class="nx">description</span><span class="p">(</span><span class="s">&#39;Push to git origin&#39;</span><span class="p">)</span>
<span class="p">.</span><span class="nx">option</span><span class="p">(</span><span class="s">&#39;-m, --message &lt;message&gt;&#39;</span><span class="p">,</span> <span class="s">&#39;Give comment to commit&#39;</span><span class="p">)</span>
<span class="p">.</span><span class="nx">action</span> <span class="nf">(dir, options) -&gt;</span>
  <span class="nv">options.dir = </span><span class="nx">dir</span> <span class="o">?</span> <span class="s">&#39;.&#39;</span>
  <span class="nx">run</span> <span class="nx">commander</span><span class="p">,</span> <span class="nx">options</span><span class="p">,</span> <span class="nf">-&gt;</span> <span class="nx">process</span><span class="p">.</span><span class="nx">exit</span> <span class="mi">0</span>


</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap" id="push%20to%20github">
  <h3>
    <a href="#push%20to%20github" name="push%20to%20github" class="pilcrow">&#182;</a>
    Push to GitHub
  </h3>
</div>

        </td>
        <td class="code highlight"><div class="highlight"><pre>
<span class="nx">commander</span><span class="p">.</span><span class="nx">command</span><span class="p">(</span><span class="s">&#39;pull [dir]&#39;</span><span class="p">)</span>
<span class="p">.</span><span class="nx">description</span><span class="p">(</span><span class="s">&#39;Pull from git origin&#39;</span><span class="p">)</span>
<span class="p">.</span><span class="nx">action</span> <span class="nf">(dir, options) -&gt;</span>
  <span class="nv">options.dir = </span><span class="nx">dir</span> <span class="o">?</span> <span class="s">&#39;.&#39;</span>
  <span class="nx">run</span> <span class="nx">commander</span><span class="p">,</span> <span class="nx">options</span><span class="p">,</span> <span class="nf">-&gt;</span> <span class="nx">process</span><span class="p">.</span><span class="nx">exit</span> <span class="mi">0</span>


</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap" id="compile%20the%20code%20as%20necessary">
  <h3>
    <a href="#compile%20the%20code%20as%20necessary" name="compile%20the%20code%20as%20necessary" class="pilcrow">&#182;</a>
    Compile the code as necessary
  </h3>
</div>

        </td>
        <td class="code highlight"><div class="highlight"><pre>
<span class="nx">commander</span><span class="p">.</span><span class="nx">command</span><span class="p">(</span><span class="s">&#39;compile [dir]&#39;</span><span class="p">)</span>
<span class="p">.</span><span class="nx">description</span><span class="p">(</span><span class="s">&#39;Compile the code as necessary&#39;</span><span class="p">)</span>
<span class="p">.</span><span class="nx">option</span><span class="p">(</span><span class="s">&#39;-u, --uglify&#39;</span><span class="p">,</span> <span class="s">&#39;Use uglify to compress&#39;</span><span class="p">)</span>
<span class="p">.</span><span class="nx">action</span> <span class="nf">(dir, options) -&gt;</span>
  <span class="nv">options.dir = </span><span class="nx">dir</span> <span class="o">?</span> <span class="s">&#39;.&#39;</span>
  <span class="nx">run</span> <span class="nx">commander</span><span class="p">,</span> <span class="nx">options</span><span class="p">,</span> <span class="nf">-&gt;</span> <span class="nx">process</span><span class="p">.</span><span class="nx">exit</span> <span class="mi">0</span>


</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap" id="publish%20to%20github%20and%20npm">
  <h3>
    <a href="#publish%20to%20github%20and%20npm" name="publish%20to%20github%20and%20npm" class="pilcrow">&#182;</a>
    Publish to GitHub and npm
  </h3>
</div>

        </td>
        <td class="code highlight"><div class="highlight"><pre>
<span class="nx">commander</span><span class="p">.</span><span class="nx">command</span><span class="p">(</span><span class="s">&#39;publish [dir]&#39;</span><span class="p">)</span>
<span class="p">.</span><span class="nx">description</span><span class="p">(</span><span class="s">&#39;Create new node module&#39;</span><span class="p">)</span>
<span class="p">.</span><span class="nx">option</span><span class="p">(</span><span class="s">&#39;--major&#39;</span><span class="p">,</span> <span class="s">&#39;Create new major version&#39;</span><span class="p">)</span>
<span class="p">.</span><span class="nx">option</span><span class="p">(</span><span class="s">&#39;--minor&#39;</span><span class="p">,</span> <span class="s">&#39;Create new minor version&#39;</span><span class="p">)</span>
<span class="p">.</span><span class="nx">action</span> <span class="nf">(dir, options) -&gt;</span>
  <span class="nv">options.dir = </span><span class="nx">dir</span> <span class="o">?</span> <span class="s">&#39;.&#39;</span>
  <span class="nx">run</span> <span class="nx">commander</span><span class="p">,</span> <span class="nx">options</span><span class="p">,</span> <span class="nf">-&gt;</span> <span class="nx">process</span><span class="p">.</span><span class="nx">exit</span> <span class="mi">0</span>


</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap" id="build%20running%20system">
  <h3>
    <a href="#build%20running%20system" name="build%20running%20system" class="pilcrow">&#182;</a>
    Build running system
  </h3>
</div>

        </td>
        <td class="code highlight"><div class="highlight"><pre>
<span class="nx">commander</span><span class="p">.</span><span class="nx">command</span><span class="p">(</span><span class="s">&#39;test [dir]&#39;</span><span class="p">)</span>
<span class="p">.</span><span class="nx">description</span><span class="p">(</span><span class="s">&#39;Run automatic tests&#39;</span><span class="p">)</span>
<span class="p">.</span><span class="nx">option</span><span class="p">(</span><span class="s">&#39;-w, --watch&#39;</span><span class="p">,</span> <span class="s">&#39;Keep the process running, watch for changes and process again&#39;</span><span class="p">)</span>
<span class="p">.</span><span class="nx">option</span><span class="p">(</span><span class="s">&#39;-c, --coverage&#39;</span><span class="p">,</span> <span class="s">&#39;Create coverage report&#39;</span><span class="p">)</span>
<span class="p">.</span><span class="nx">option</span><span class="p">(</span><span class="s">&#39;--coveralls&#39;</span><span class="p">,</span> <span class="s">&#39;Send coverage to coveralls&#39;</span><span class="p">)</span>
<span class="p">.</span><span class="nx">option</span><span class="p">(</span><span class="s">&#39;-b, --browser&#39;</span><span class="p">,</span> <span class="s">&#39;Open in browser&#39;</span><span class="p">)</span>
<span class="p">.</span><span class="nx">action</span> <span class="nf">(dir, options) -&gt;</span>
  <span class="nv">options.dir = </span><span class="nx">dir</span> <span class="o">?</span> <span class="s">&#39;.&#39;</span>
  <span class="nx">run</span> <span class="nx">commander</span><span class="p">,</span> <span class="nx">options</span><span class="p">,</span> <span class="nf">-&gt;</span> <span class="nx">process</span><span class="p">.</span><span class="nx">exit</span> <span class="mi">0</span>


</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap" id="create%20documentation">
  <h3>
    <a href="#create%20documentation" name="create%20documentation" class="pilcrow">&#182;</a>
    Create documentation
  </h3>
</div>

        </td>
        <td class="code highlight"><div class="highlight"><pre>
<span class="nx">commander</span><span class="p">.</span><span class="nx">command</span><span class="p">(</span><span class="s">&#39;doc [dir]&#39;</span><span class="p">)</span>
<span class="p">.</span><span class="nx">description</span><span class="p">(</span><span class="s">&#39;Create new API documentation for module&#39;</span><span class="p">)</span>
<span class="p">.</span><span class="nx">option</span><span class="p">(</span><span class="s">&#39;-w, --watch&#39;</span><span class="p">,</span> <span class="s">&#39;Keep the process running, watch for changes and process updated files&#39;</span><span class="p">)</span>
<span class="p">.</span><span class="nx">option</span><span class="p">(</span><span class="s">&#39;-p, --publish&#39;</span><span class="p">,</span> <span class="s">&#39;Push to github pages&#39;</span><span class="p">)</span>
<span class="p">.</span><span class="nx">option</span><span class="p">(</span><span class="s">&#39;-b, --browser&#39;</span><span class="p">,</span> <span class="s">&#39;Open in browser&#39;</span><span class="p">)</span>
<span class="p">.</span><span class="nx">action</span> <span class="nf">(dir, options) -&gt;</span>
  <span class="nv">options.dir = </span><span class="nx">dir</span> <span class="o">?</span> <span class="s">&#39;.&#39;</span>
  <span class="nx">run</span> <span class="nx">commander</span><span class="p">,</span> <span class="nx">options</span><span class="p">,</span> <span class="nf">-&gt;</span> <span class="nx">process</span><span class="p">.</span><span class="nx">exit</span> <span class="mi">0</span>


</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap" id="cleanup%20automatic%20created%20files">
  <h3>
    <a href="#cleanup%20automatic%20created%20files" name="cleanup%20automatic%20created%20files" class="pilcrow">&#182;</a>
    Cleanup automatic created files
  </h3>
</div>

        </td>
        <td class="code highlight"><div class="highlight"><pre>
<span class="nx">commander</span><span class="p">.</span><span class="nx">command</span><span class="p">(</span><span class="s">&#39;clean [dir]&#39;</span><span class="p">)</span>
<span class="p">.</span><span class="nx">description</span><span class="p">(</span><span class="s">&#39;Cleanup automatic generated files&#39;</span><span class="p">)</span>
<span class="p">.</span><span class="nx">option</span><span class="p">(</span><span class="s">&#39;-d, --dist&#39;</span><span class="p">,</span> <span class="s">&#39;Clean all which is not needed in production&#39;</span><span class="p">)</span>
<span class="p">.</span><span class="nx">option</span><span class="p">(</span><span class="s">&#39;-a, --auto&#39;</span><span class="p">,</span> <span class="s">&#39;Clean all which is automatically generated&#39;</span><span class="p">)</span>
<span class="p">.</span><span class="nx">action</span> <span class="nf">(dir, options) -&gt;</span>
  <span class="k">if</span> <span class="nx">options</span><span class="p">.</span><span class="nx">dist</span> <span class="o">and</span> <span class="nx">options</span><span class="p">.</span><span class="nx">auto</span>
    <span class="nx">console</span><span class="p">.</span><span class="nx">error</span> <span class="s">&quot;Don&#39;t use both switches --dist and --auto together, that destroys your code.&quot;</span>
    <span class="nx">process</span><span class="p">.</span><span class="nx">exit</span> <span class="mi">2</span>
  <span class="nv">options.dir = </span><span class="nx">dir</span> <span class="o">?</span> <span class="s">&#39;.&#39;</span>
  <span class="nx">run</span> <span class="nx">commander</span><span class="p">,</span> <span class="nx">options</span><span class="p">,</span> <span class="nf">-&gt;</span> <span class="nx">process</span><span class="p">.</span><span class="nx">exit</span> <span class="mi">0</span>




</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap" id="run%20commands">
  <h2>
    <a href="#run%20commands" name="run%20commands" class="pilcrow">&#182;</a>
    Run commands
  </h2>
</div>


<p>Call the command line parsing and the given command.</p>
        </td>
        <td class="code highlight"><div class="highlight"><pre>
<span class="nx">commander</span><span class="p">.</span><span class="nx">parse</span> <span class="nx">process</span><span class="p">.</span><span class="nx">argv</span>


</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-21" id="section-21">&#182;</a>
</div>
<p>check that it works properly</p>
        </td>
        <td class="code highlight"><div class="highlight"><pre>
<span class="k">unless</span> <span class="nx">commander</span><span class="p">.</span><span class="nx">args</span><span class="p">.</span><span class="nx">length</span>
  <span class="nx">console</span><span class="p">.</span><span class="nx">error</span> <span class="s">&quot;No valid command given show help using --help switch.&quot;</span><span class="p">.</span><span class="nx">red</span>
  <span class="nx">process</span><span class="p">.</span><span class="nx">exit</span> <span class="o">-</span><span class="mi">1</span>
<span class="k">if</span> <span class="k">typeof</span> <span class="nx">commander</span><span class="p">.</span><span class="nx">args</span><span class="p">[</span><span class="nx">commander</span><span class="p">.</span><span class="nx">args</span><span class="p">.</span><span class="nx">length</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span> <span class="o">is</span> <span class="s">&#39;string&#39;</span>
  <span class="nx">console</span><span class="p">.</span><span class="nx">error</span> <span class="s">&quot;Command &#39;</span><span class="si">#{</span><span class="nx">commander</span><span class="p">.</span><span class="nx">args</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="si">}</span><span class="s">&#39; not found use --help switch.&quot;</span><span class="p">.</span><span class="nx">red</span>
  <span class="nx">process</span><span class="p">.</span><span class="nx">exit</span> <span class="o">-</span><span class="mi">1</span>
</pre></div>
        </td>
      </tr>
  </tbody>
</table>
  </div>
</body>
</html>
