<!DOCTYPE html>
<html>
<head>
  <title>README.md</title>
  <meta http-equiv="content-type" content="text/html; charset=UTF-8">
  <link rel="stylesheet" media="all" href="doc-style.css" />
  <script src="doc-filelist.js"></script>
  <script>
    var relativeDir = "";
    var thisFile = "home/alex/github/node-builder/README.md";
    var defaultSidebar = true;
  </script>
  <script src="doc-script.js"></script>

<meta name="viewport" content="width=device-width, initial-scale=1.0" /></head>
<body>
  <nav>
<div class="logo"><a href="http://alinex.github.io"
  onmouseover="logo.src='https://alinex.github.io/images/Alinex-200.png'"
  onmouseout="logo.src='https://alinex.github.io/images/Alinex-black-200.png'">
  <img name="logo" src="https://alinex.github.io/images/Alinex-black-200.png"
    width="150" title="Alinex Universe Homepage" />
  </a>
  <img src="http://alinex.github.io/images/Alinex-200.png"
    style="display:none" alt="preloading" />
</div>
<div class="links">
  <a href="http://alinex.github.io/blog"
    class="btn btn-primary"><span class="glyphicon-pencil"></span> Blog</a>
  <a href="http://alinex.github.io/develop"
    class="btn btn-primary"><span class="glyphicon-book"></span> Develop</a>
  <a href="http://alinex.github.io/code.html"
    class="btn btn-warning"><span class="glyphicon-cog"></span> Code</a>
</div>
</nav><div id="sidebar_wrapper">
    <div id="sidebar_switch">
      <span class="tree">Files</span>
      <span class="headings">Headings</span>
    </div>
    <div id="tree"></div>
    <div id="headings">

      <div class="heading h1">
        <a href="#alinex-builder">Alinex Builder</a>
      </div>

      <div class="heading h2">
        <a href="#motivation">Motivation</a>
      </div>

      <div class="heading h2">
        <a href="#install">Install</a>
      </div>

      <div class="heading h2">
        <a href="#usage">Usage</a>
      </div>

      <div class="heading h3">
        <a href="#general-options">General options</a>
      </div>

      <div class="heading h3">
        <a href="#create">create</a>
      </div>

      <div class="heading h3">
        <a href="#push">push</a>
      </div>

      <div class="heading h3">
        <a href="#pull">pull</a>
      </div>

      <div class="heading h3">
        <a href="#link">link</a>
      </div>

      <div class="heading h3">
        <a href="#compile">compile</a>
      </div>

      <div class="heading h3">
        <a href="#update">update</a>
      </div>

      <div class="heading h3">
        <a href="#test">test</a>
      </div>

      <div class="heading h3">
        <a href="#doc">doc</a>
      </div>

      <div class="heading h3">
        <a href="#changes">changes</a>
      </div>

      <div class="heading h3">
        <a href="#publish">publish</a>
      </div>

      <div class="heading h3">
        <a href="#clean">clean</a>
      </div>

      <div class="heading h2">
        <a href="#configuration">Configuration</a>
      </div>

      <div class="heading h3">
        <a href="#document-template">Document Template</a>
      </div>

      <div class="heading h2">
        <a href="#license">License</a>
      </div>

    </div>
  </div>
  <div id="sidebar-toggle"></div>
  <div id="container" tabindex="0"><a id="fork" href="https://github.com/alinex/node-builder" title="Fork me on GitHub"></a>
    <div class="docs markdown"><div class="pilwrap" id="alinex-builder">
  <h1>
    <a href="#alinex-builder" name="alinex-builder" class="pilcrow"></a>
Alinex Builder
  </h1>
</div>
<p><a href="https://travis-ci.org/alinex/node-builder"><img src="https://travis-ci.org/alinex/node-builder.svg?branch=master" alt="Build Status"></a>
<a href="https://gemnasium.com/alinex/node-builder"><img src="https://gemnasium.com/alinex/node-builder.png" alt="Dependency Status"></a></p>
<p>This package contains some helper commands for development of the alinex
node packages. Realized as a superset of npm and other command line tools.</p>
<p>It may help a lot while developing to automatize the consequently done tasks.</p>
<ul>
<li>easy to use build tool</li>
<li>supporting complete process</li>
<li>specialized for the alinex modules</li>
<li>usable for other modules, too</li>
<li>working with multiple packages at once</li>
</ul>
<blockquote>
<p>It is one of the modules of the <a href="http://alinex.github.io/code.html">Alinex Universe</a>
following the code standards defined in the <a href="http://alinex.github.io/node-alinex">General Docs</a>.</p>
</blockquote>
<div class="pilwrap" id="motivation">
  <h2>
    <a href="#motivation" name="motivation" class="pilcrow"></a>
Motivation
  </h2>
</div>
<p>While developing an automated build tool always help saving time and make things
magic and smooth.</p>
<p>My first intention was to use the standardized tools so I looked at Bower and
Cake. To have more possibilities above the tasks I decided to create a Cakefile.
This was a good way but over time it got bloated.</p>
<p>Because the general tasks are easy but have to be modularized I decided to
separate them into build tasks which stay in the package and overall management
tasks which were moved out into this helper tool.</p>
<div class="pilwrap" id="install">
  <h2>
    <a href="#install" name="install" class="pilcrow"></a>
Install
  </h2>
</div>
<p><a href="https://www.npmjs.com/package/alinex-builder"><img src="https://nodei.co/npm/alinex-builder.png?downloads=true&amp;downloadRank=true&amp;stars=true" alt="NPM">
<img src="https://nodei.co/npm-dl/alinex-builder.png?months=9&amp;height=3" alt="Downloads">
</a></p>
<p>It may be installed globally as an universal helper or integrated into a package
as development dependency.</p>
<p>Install the package globally using npm:</p>
<pre><code class="sh">sudo npm install -g alinex-builder --production
builder --help
</code></pre>
<p>After global installation you may directly call <code>builder</code> from anywhere like shown
above.</p>
<p>Or you may integrate it into your own package:</p>
<pre><code class="sh">npm install alinex-builder --save-devs
./node_modules/.bin/builder --help
</code></pre>
<p>By integrating it you won't need all the development tools within your package.</p>
<p>Always have a look at the latest <a href="Changelog.md.html.html">changes</a>.</p>
<div class="pilwrap" id="usage">
  <h2>
    <a href="#usage" name="usage" class="pilcrow"></a>
Usage
  </h2>
</div>
<p>The tool will be called with:</p>
<pre><code class="sh">builder [<span class="hljs-built_in">dirs</span>] [general options] -c &lt;commands&gt; [<span class="hljs-built_in">command</span> options]
</code></pre>
<p>But if not installed globally you may run:</p>
<pre><code class="sh">node_modules/.bin/builder [<span class="hljs-built_in">dirs</span>] [general options] -c &lt;commands&gt;
</code></pre>
<p>With the option <code>--help</code> a screen explaining all commands and options will be
displayed. The major commands will be described here.</p>
<p>Multiple directory names can be given. They specify on which project to work on.
It should point to the base package directory of a module. If not specified the
command will run from the current directory.
You may change the order of the options like you want but keep the directories
before them. If you give a directory just behind a command it is interpreted
as additional command instead as directory.</p>
<p>If you want to give multiple commands add a second <code>-c</code> option or just put them
one behind the other in one option.</p>
<p>Within your <code>package.json</code> it may look like:</p>
<pre><code class="json">{
  "<span class="hljs-attribute">scripts</span>": <span class="hljs-value">{
    "<span class="hljs-attribute">prepublish</span>": <span class="hljs-value"><span class="hljs-string">"node_modules/.bin/builder -c compile --uglify"</span></span>,
    "<span class="hljs-attribute">test</span>": <span class="hljs-value"><span class="hljs-string">"node_modules/.bin/builder -c test"</span>
  </span>}
</span>}
</code></pre>
<div class="pilwrap" id="general-options">
  <h3>
    <a href="#general-options" name="general-options" class="pilcrow"></a>
General options
  </h3>
</div>
<p><code>-v</code>or <code>--verbose</code> will display a lot of information of what is going on.
This information will sometimes look discarded because of the parallel
processing of some tasks.</p>
<p><code>-C</code> or <code>--no-colors</code> can be used to disable the colored output.</p>
<div class="pilwrap" id="create">
  <h3>
    <a href="#create" name="create" class="pilcrow"></a>
create
  </h3>
</div>
<p>Create a new package from scratch. This will create:</p>
<ul>
<li>the directory</li>
<li>make some initial files</li>
<li>init git repository</li>
<li>setup github repository</li>
<li>add and commit everything</li>
</ul>
<p>The create task needs the <code>--password</code> setting to access github
through the api. And you may specify the <code>--package</code> setting for the npm name
of the package. The also mandatory path will be used as the github repository
name, too.</p>
<p>Some example calls will look like:</p>
<pre><code class="sh">builder ./node-error -c create --package alinex-error
builder ./private-module -c create --private
</code></pre>
<p>This process is interactive and will ask you some more details. After that you
may directly start to add your code.</p>
<div class="pilwrap" id="push">
  <h3>
    <a href="#push" name="push" class="pilcrow"></a>
push
  </h3>
</div>
<p>This will push the changes to the origin repository. With the <code>--message</code> option
it will also add and commit all other changes before doing so.</p>
<pre><code class="sh">builder -c push                  <span class="hljs-comment"># from within the package directory</span>
builder ./node-error -c push     <span class="hljs-comment"># or from anywhere else</span>
</code></pre>
<p>or to also commit the last changes</p>
<pre><code class="sh">builder ./node-error -c push --message <span class="hljs-string">"commit message"</span>
</code></pre>
<div class="pilwrap" id="pull">
  <h3>
    <a href="#pull" name="pull" class="pilcrow"></a>
pull
  </h3>
</div>
<p>Like <code>push</code> this will fetch the newest changes from git origin.</p>
<pre><code class="sh">builder -c pull                  <span class="hljs-comment"># from within the package directory</span>
builder ./node-error -c pull     <span class="hljs-comment"># or from anywhere else</span>
</code></pre>
<pre><code class="text">Pull from origin
Von https://github.com/alinex/node-make
* branch            master     -&gt; FETCH_HEAD
</code></pre>
<div class="pilwrap" id="link">
  <h3>
    <a href="#link" name="link" class="pilcrow"></a>
link
  </h3>
</div>
<p>This task will link a local package installed in a parallel directory into the
packages node_modules directory.</p>
<pre><code class="sh">builder -c link                  <span class="hljs-comment"># link all node-... as alinex-...  packages</span>
builder -c link --locale config  <span class="hljs-comment"># or link only the config package</span>
</code></pre>
<div class="pilwrap" id="compile">
  <h3>
    <a href="#compile" name="compile" class="pilcrow"></a>
compile
  </h3>
</div>
<p>This task is used to compile the sources into for runtime optimized library.</p>
<pre><code class="sh">builder -c compile               <span class="hljs-comment"># from within the package directory</span>
builder ./node-error -c compile  <span class="hljs-comment"># or from anywhere else</span>
</code></pre>
<pre><code class="text">Remove old directories
Compile man pages
Compile coffee script
</code></pre>
<p>Or give an directory and use uglify to compress the extension.</p>
<pre><code class="sh">builder ./node-error -c compile --uglify
</code></pre>
<p>Mostly this task will be added as prepublish script to the <code>package.json</code> like:</p>
<pre><code class="json">{
  "<span class="hljs-attribute">scripts</span>": <span class="hljs-value">{
    "<span class="hljs-attribute">prepublish</span>": <span class="hljs-value"><span class="hljs-string">"node_modules/.bin/builder -c compile -u"</span>
  </span>}
</span>}
</code></pre>
<p>Also this will make man files from mardown documents in <code>src/man</code> if they
are referenced in the package.json.</p>
<div class="pilwrap" id="update">
  <h3>
    <a href="#update" name="update" class="pilcrow"></a>
update
  </h3>
</div>
<p>This task is a handy addition to include the npm install and npm update commands:</p>
<pre><code class="sh">builder -c update               <span class="hljs-comment"># from within the package directory</span>
builder ./node-error -c update  <span class="hljs-comment"># or from anywhere else</span>
</code></pre>
<p>At the end this task will list all direct subpackages which are outdated and may
be updated in the package.json.</p>
<pre><code class="text">update and installation of package with dependent packages
update ./
Install through npm
Update npm packages
List outdated packages
Package               Current  Wanted     Latest  Location
Nothing to upgrade in this package found.
Done.
</code></pre>
<div class="pilwrap" id="test">
  <h3>
    <a href="#test" name="test" class="pilcrow"></a>
test
  </h3>
</div>
<p>As a first test a coffeelint check will be run. Only if this won't have any
errors the automatic tests will be run.</p>
<p>If the <a href="http://gotwarlost.github.io/istanbul/">istanbul</a> module is installed
a code coverage report will be build.
And at last code metrics will be analyzed but only on the compiled version at
the moment. You will find this reports under '/reports' directory as html.</p>
<pre><code class="sh">builder -c <span class="hljs-built_in">test</span>                  <span class="hljs-comment"># from within the package directory</span>
builder ./node-error -c <span class="hljs-built_in">test</span>     <span class="hljs-comment"># or from anywhere else</span>
</code></pre>
<pre><code class="text">Linting coffee code
Run mocha tests

Simple mocha test
✓ should add two numbers

1 passing (9ms)
</code></pre>
<p>Or to contineously watch it:</p>
<pre><code class="sh">builder ./node-error -c <span class="hljs-built_in">test</span> --watch
</code></pre>
<p>You may also create an html coverage report:</p>
<pre><code class="sh">builder -c <span class="hljs-built_in">test</span> --coverage
</code></pre>
<p>If you want to stop after the  first error occurs use the <code>--bail</code> flag.</p>
<p>And at last you can add the <code>--browser</code> flag to open the coverage report
automatically in the browser. Also <code>--coveralls</code> may be added to send the
results to coveralls.</p>
<p>This task can also be added to the <code>package.json</code> to be called using <code>npm test</code>:</p>
<pre><code class="json">{
  "<span class="hljs-attribute">scripts</span>": <span class="hljs-value">{
    "<span class="hljs-attribute">test</span>": <span class="hljs-value"><span class="hljs-string">"node_modules/.bin/builder test"</span>
  </span>}
</span>}
</code></pre>
<p>Often you would also need the following combination:</p>
<pre><code class="sh">builder -v -c compile <span class="hljs-built_in">test</span>           <span class="hljs-comment"># to check your just finished code changes</span>
</code></pre>
<div class="pilwrap" id="doc">
  <h3>
    <a href="#doc" name="doc" class="pilcrow"></a>
doc
  </h3>
</div>
<p>Generate the documentation this will create the documentation in the <code>doc</code>
folder. It includes the API documentation with code. Each module will get his
own documentation space with an auto generated index page.</p>
<p>This tool will extract the documentation from the markup and code files in
any language and generate HTML pages with the documentation beside the
code.</p>
<pre><code class="sh">builder -c doc                   <span class="hljs-comment"># from within the package directory</span>
builder ./node-error -c doc      <span class="hljs-comment"># or from anywhere else</span>
</code></pre>
<pre><code class="text">Create html documentation
Done.
</code></pre>
<p>It is also possible to update the documentation stored on any website. To
configure this for GitHub pages, you have to do nothing, for all others you
need to specify an <code>doc-publish</code> script in <code>package.json</code>. This may be an
rsync copy job like <code>rsync -av --delete doc root@myserver:/var/www</code>.
Start the document creation with publication using:</p>
<pre><code class="sh">builder ./node-error -c doc --publish
</code></pre>
<p>With the <code>--watch</code> option it is possible to keep the documentation updated.</p>
<pre><code class="sh">builder  ./node-error -c doc --watch
</code></pre>
<p>But this process will never end, you have to stop it manually to end it.</p>
<p>And at last you may also add the <code>--browser</code> flag to open the documentation in
the browser after created.</p>
<p>The style of the documentation can be specified if a specific css is present
in the alinex make package. It have to be under the path <code>src/data</code> and be called
by the <code>&lt;basename&gt;.css</code> while basename is the package name before the first
hyphen.</p>
<div class="pilwrap" id="changes">
  <h3>
    <a href="#changes" name="changes" class="pilcrow"></a>
changes
  </h3>
</div>
<p>This will list all changes in</p>
<ul>
<li>packages</li>
<li>since last version tag</li>
<li>in current committe</li>
<li>and things are staged only</li>
</ul>
<p>Use this to check if you should make a new publication or if it can wait.</p>
<pre><code class="sh">builder -c changes
</code></pre>
<pre><code class="text">NPM Update check:
- docker            😕  NOTUSED?  Possibly never referenced in the code.
- alinex-config     😍  UPDATE!   Your local install is out of date. http://alinex.github.io/node-config/
- marked-man        😕  NOTUSED?  Possibly never referenced in the code.
- coffee-coverage   😕  NOTUSED?  Possibly never referenced in the code.
- coffeelint        😕  NOTUSED?  Possibly never referenced in the code.
- coveralls         😕  NOTUSED?  Possibly never referenced in the code.
- istanbul          😕  NOTUSED?  Possibly never referenced in the code.
- npm-check         😕  NOTUSED?  Possibly never referenced in the code.
- replace           😕  NOTUSED?  Possibly never referenced in the code.
- uglify-js         😕  NOTUSED?  Possibly never referenced in the code.
Changes since last publication as v1.1.13:
- Upgraded config module.
Changes to be committed:
- modified: src/tasks/changes.coffee
Changes not staged for commit:
- modified: README.md
- modified: src/tasks/changes.coffee
</code></pre>
<div class="pilwrap" id="publish">
  <h3>
    <a href="#publish" name="publish" class="pilcrow"></a>
publish
  </h3>
</div>
<p>With the push command you can publish your newest changes to github and npm as a
new version. The version can be set by signaling if it should be a <code>--major</code>,
<code>--minor</code> or bugfix version if no switch given.</p>
<p>To publish the next bugfix version only call:</p>
<pre><code class="sh">builder -c publish               <span class="hljs-comment"># from within the package directory</span>
builder ./node-error -c publish  <span class="hljs-comment"># or from anywhere else</span>
</code></pre>
<p>The output will be:</p>
<pre><code class="text">push changes to repository
push node-builder
Push to origin
remote: This repository moved. Please use the new location:
remote:   https://github.com/alinex/node-builder.git
To https://github.com/alinex/node-make
   46f16d7..34a0a61  master -&gt; master
cleanup files
clean node-builder
Remove unnecessary folders
update and installation of package with dependent packages
update node-builder
Install through npm
Update npm packages
List outdated packages
Package               Current  Wanted     Latest  Location
Nothing to upgrade in this package found.
run automatic tests
test node-builder
Linting coffee code
Run mocha tests
  Simple mocha test
    ✓ should add two numbers
  1 passing (5ms)
create documentation pages
doc node-builder
Create html documentation
Cloning git repository
Nach »/tmp/alinex-make-2088206155« wird geklont
Checkout gh-pages branch
Zu neuem Zweig »gh-pages« gewechselt
Update documentation
Push to git origin
To https://github.com/alinex/node-builder
   bfc73a0..1114a9b  gh-pages -&gt; gh-pages
publish package in npm
publish node-builder
Change package.json
Write new changelog
Commit new version information
Push to git origin
remote: This repository moved. Please use the new location:
remote:   https://github.com/alinex/node-builder.git
To https://github.com/alinex/node-make
   34a0a61..0fef12e  master -&gt; master
Push new tag to git origin
remote: This repository moved. Please use the new location:
remote:   https://github.com/alinex/node-builder.git
To https://github.com/alinex/node-make
 * [new tag]         v1.0.9 -&gt; v1.0.9
Push to npm
Created v1.0.9.
Done.
</code></pre>
<p>Like seen above this will also push last changes, cleanup, reinstall the package
compile with compression and run all tests before publishing. And the documentation
will be updated afterwards, too.</p>
<p>For the next minor version (second number) call:</p>
<pre><code class="sh">builder ./node-error -c publish --minor
</code></pre>
<p>And for a new major version:</p>
<pre><code class="sh">builder ./node-error -c publish --major
</code></pre>
<p>And you may use the switches <code>--try</code> to not really publish but to check if it will
be possible and <code>--force</code> to always publish also if it is not possible because of
failed tests or not up-to-date dependent packages.</p>
<div class="pilwrap" id="clean">
  <h3>
    <a href="#clean" name="clean" class="pilcrow"></a>
clean
  </h3>
</div>
<p>Remove all automatically generated files. This will bring you to the initial
state of the system. To create a usable system you have to build it again.</p>
<p>To clean everything which you won't need for a production environment use
<code>--dist</code> or <code>--auto</code> to remove all automatically generated files in the
development environment.</p>
<p>To cleanup all safe files:</p>
<pre><code class="sh">builder -c clean                 <span class="hljs-comment"># from within the package directory</span>
builder ./node-error -c clean    <span class="hljs-comment"># or from anywhere else</span>
</code></pre>
<p>Or on the development system remove all created files:</p>
<pre><code class="sh">builder ./node-error -c clean --auto
</code></pre>
<p>And at last for production remove development files:</p>
<pre><code class="sh">builder ./node-error -c clean --dist
</code></pre>
<div class="pilwrap" id="configuration">
  <h2>
    <a href="#configuration" name="configuration" class="pilcrow"></a>
Configuration
  </h2>
</div>
<p>The only thing you may configure using configuration files is the layout of the
documentation.</p>
<div class="pilwrap" id="document-template">
  <h3>
    <a href="#document-template" name="document-template" class="pilcrow"></a>
Document Template
  </h3>
</div>
<p>You may specify a different document layout by creating a file named like the
main part of your package (name till the first hyphen). Use the file
<code>/var/src/docstyle/default.css</code> as a default and store your own in
<code>/var/local/docstyle/&lt;basename&gt;.css</code>.</p>
<p>Also the javascript may be changed for each package basename in <code>&lt;basename&gt;.js</code>
like done for the css.</p>
<div class="pilwrap" id="license">
  <h2>
    <a href="#license" name="license" class="pilcrow"></a>
License
  </h2>
</div>
<p>Copyright 2013-2016 Alexander Schilling</p>
<p>Licensed under the Apache License, Version 2.0 (the &quot;License&quot;);
you may not use this file except in compliance with the License.
You may obtain a copy of the License at</p>
<blockquote>
<p><a href="http://www.apache.org/licenses/LICENSE-2.0">http://www.apache.org/licenses/LICENSE-2.0</a></p>
</blockquote>
<p>Unless required by applicable law or agreed to in writing, software
distributed under the License is distributed on an &quot;AS IS&quot; BASIS,
WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
See the License for the specific language governing permissions and
limitations under the License.</p>
</div>
  </div>
</body>
</html>
